
Преамбула:
Ниже будут указываться относительные пути. Домен должен быть конфигурируемый. В данный момент домен: main.service-hit-proxy.com

Доки лежат тут - https://main-test.service-hit-proxy.com/swagger-ui/index.html#
Логин: fgdsfsdfsdfsd
Пароль: dsagfredyt4536t

Это тестовая апишка. В ней нету связи с продакшеном. Для разработки.

В данном файле разделение по логическим блокам осуществлено с помощью 3 пустых строк.



Методы для изменения ключа, приватные: (платные)
1: Создание ключа - POST /api/v5/key
Поля:
 - serverTag - сервер, для которого выписывается ключ.
 - rotatePeriodSec - в данный момент не используются, либо не передавать, либо 0.
 - allowedDestinations - список правил разрешенных конечных точек. (тариф) [1]
 - disabledDestinations - список правил запрещенных конечных точек. (тариф) [2]
 - threadLimit - лимит потоков.
 - ttlSec - время жизни ключа в секундах.
 - maxLinkedIps - сколько может быть IP привязано к ключу. По умолчанию 2.
 - initAuthType - установить тип авторизации при создании ключа. (вроде не нужно)
 - description - примечания к ключу. Писать сюда нужно что был куплен через proxy-lite.com и мыло юзера.

2: Продление ключа - PATCH  /api/v5/key/addTime
Поля:
 - key - ключ которому добавить время нужно
 - addSec - сколько добавить секунд в ключ
 

 
Методы управления ключем, доступно юзеру:
1: Информация о ключе - GET  /api/v5/key
Поля:
 - key - ключ

2: Изменить тип авторизации - PATCH  /api/v5/key/selectAuthType
Поля:
 - key - ключ
 - authType - BY_IP (по айпи) / BY_LOG_PWD (по логину и паролю)
 
3: Изменить логин и пароль - PATCH  /api/v5/key/generateLogPwd
Поля:
 - key - ключ
 
4: Изменить аутентифицированный IP - PATCH  /api/v5/key/changeIpAdr
Поля:
 - key - ключ
 - ipIndex - индекс адреса, который нужно изменить
 - newIp - новый адрес, для данного индекса в данном ключе

5: Изменить время ротации - PATCH  /api/v5/key/setRotatePeriod (ПОКА ЧТО НЕ НУЖНО РЕАЛИЗОВЫВАТЬ)
Поля:
 - key - ключ
 - rotatePeriodSec - период ротации в секундах



Статистика использования потоков - GET  /api/v5/analytics/stats
Поля:
 - key - ключ


 
Получение списка прокси. Разделах в доках proxy-list-api.
Параметр пути listName - соотвествует полю ключа serverTag в нижнем регистре.
Методы:
 - raw - просто список в виде host:port для подключений
 - withProtocol - подставляет в raw список протокол подключения, поле protocol не валидируется. Рабочие протоколы: http/socks5/socks5h
 - withCredentials - подставляет в raw список аутентификационные данные, а так же опционально протокол подключения.
 Булевое поле inverted по умолчанию false, в таком случае сначала идет логин и пароль, затем хост и порт. В случае true - инвертируется.
 logPwdSeparator - по умолчанию разделитель логина и пароля с хостом и портом это собака (@), с помощью данного параметра можно подменить на любое.
 
 Это нужно т.к. разный софт по разному хочет видеть формат прокси с логином и паролем. Частый вариант использованния это: inverted=true&logPwdSeparator=:

 
 
 
 
 
 
[1] - правила для списка разрешенных конечных точек:
 - *recaptcha.net
 - google.*
 - www.google.*
 - *gstatic.*
 - monitor.capmonster.app

[2] - правила для запрещенных конечных точек - оставить пустым.


выбор типа авторизации:

1) selectedAuthType: BY_IP 
2) selectedAuthType: BY_LOG_PWD

параметры авторизации меняются из пути /api/v5/key/selectAuthType?key=
что бы сменить авторизацию нужно передать параметр key=(тут пишем номер ключа)

есть 2 вида авторизации
BY_IP - это авторизация в ключ с привязкой по IP адресу
BY_LOG_PWD - это авторизация в ключ с привязкой через логин и пароль

что бы изменить авторизацию нужно передать в параметр authType вариант авторизации, у нас их всего 2, или  1) или 2) передаем - выше их описал.

в случае с авторизацией BY_IP у нас есть параметр whiteListIPs он отвечает за привязанный пользователем IP адрес , 127.0.0.1 - это фейк данные привязанного IP если это видим значит не считаем что там привязан в ключе IP.

в случае с авторизацией по логин пароль она называется selectedAuthType:  выбирается она как BY_LOG_PWD
в ней появляется пункт 
   "logPwd": {
        "login": "uXC7dgeT",
        "password": "6QVj4Xva"
    }

он выводится на фронт, мы так же видим вайт лист, сколько IP адресов привязано к авторизации по логин и пароль
    "whiteList": {
        "0": "37.145.21.90",
        "1": "194.135.119.78"
    },

в авторизации логин и пароль мы еще можем менять сам логин и пароль, через путь /api/v5/key/generateLogPwd?key=

что бы сгенерировать новые данные нам нужен ключ
